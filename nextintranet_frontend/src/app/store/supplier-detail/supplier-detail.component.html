<div class="p-4">
  <p-toast></p-toast>
  <p-progressSpinner *ngIf="loading"></p-progressSpinner>

  <div *ngIf="!loading && supplier">
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center gap-3">
        <button pButton icon="pi pi-arrow-left" [routerLink]="['/store/supplier']" class="p-button-text"></button>
        <h1 class="text-3xl font-bold">{{ supplier.name }}</h1>
      </div>
      <div class="flex gap-2">
        <button *ngIf="!editMode" pButton icon="pi pi-pencil" label="Edit" (click)="toggleEditMode()" class="p-button-warning"></button>
        <button *ngIf="editMode" pButton icon="pi pi-times" label="Cancel" (click)="cancelEdit()" class="p-button-secondary"></button>
        <button *ngIf="editMode" pButton icon="pi pi-check" label="Save" (click)="saveChanges()" class="p-button-success"></button>
      </div>
    </div>

    <p-card class="mb-4">
      <ng-template pTemplate="header">
        <div class="p-3 bg-blue-50">
          <h2 class="text-xl font-semibold m-0">Supplier Details</h2>
        </div>
      </ng-template>

      <div class="flex flex-col gap-3">
        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
          <span class="font-semibold text-gray-600">Name:</span>
          <span *ngIf="!editMode" class="text-gray-900">{{ supplier.name }}</span>
          <input *ngIf="editMode" pInputText [(ngModel)]="editedSupplier.name" class="flex-1 ml-4" />
        </div>
        
        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
          <span class="font-semibold text-gray-600">Website:</span>
          <a *ngIf="!editMode && supplier.website" [href]="supplier.website" target="_blank" class="text-blue-600 hover:underline">
            <i class="pi pi-external-link mr-1"></i>{{ supplier.website }}
          </a>
          <span *ngIf="!editMode && !supplier.website" class="text-gray-400">No website</span>
          <input *ngIf="editMode" pInputText [(ngModel)]="editedSupplier.website" class="flex-1 ml-4" />
        </div>
        
        <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
          <span class="font-semibold text-gray-600">Link Template:</span>
          <span *ngIf="!editMode" class="text-gray-900">{{ supplier.link_template || '-' }}</span>
          <input *ngIf="editMode" pInputText [(ngModel)]="editedSupplier.link_template" class="flex-1 ml-4" />
        </div>
      </div>
    </p-card>
  </div>

  <div *ngIf="!loading && !supplier" class="text-center p-4">
    <p class="text-gray-500">Supplier not found</p>
    <button pButton label="Back to Suppliers" [routerLink]="['/store/supplier']" class="mt-3"></button>
  </div>
</div>
